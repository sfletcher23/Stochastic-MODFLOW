function [y1] = myNeuralNetworkFunction2(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 09-May-2017 16:07:45.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx5 matrix, input #1
% and returns:
%   y = Qx2 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.00126557826065345;0.00105005371411575;-49963.5589717891;-49798.4921107386;0.020642128];
x1_step1.gain = [2.00465920534037;224.792913320233;3.77642572091383e-05;3.79784222354717e-05;0.000333526269226396];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.2729253488353102775;3.3642288400851265706;1.1785766845180809526;-3.9965176668712492081;-0.060968111863893829916;3.8820100669261456972;-0.95371220550510316105;4.1242931273843073114;1.1137191342339218814;2.7662536647055215866;-3.8658957942548988207;-6.8780889260360451587;6.7025964800314961067;1.0322959152599928689;-29.591956206895119408;4.4366901053533061017;-22.220754802388409388;-29.843845157616783581;-0.97527493793318853488;41.333483637590504145];
IW1_1 = [0.21357515569115037568 0.068363443802307882757 -0.3024197287763565889 -0.36495762652773600099 -1.9030673161863920217;-0.23819426678585073343 -0.075500372992129832772 0.31592744820334539568 0.38657557007038856334 2.0546666528831014631;-2.8142888647553085946 4.8631454125162081326 -3.6309563253915349001 -9.0991556452711925829 0.92742942774987890964;-5.2150522350158476925 -0.015587839652897794024 -0.37931873209345307041 -0.57273920389696386657 0.85759382660261374021;0.14218334008103220012 -0.0012033682853655181238 0.86244279112045429958 0.89220458881662501049 -1.7817810099890787345;4.9703275543105185363 0.010531828342295926002 0.43794016073913355491 0.5232527375727391572 -0.89730636861628687573;2.0221987568921675482 -4.2702494356470142023 2.9656525079230244835 8.4243012940174697434 -0.94032410102356678294;5.4481967786623766159 0.021878790584431810629 0.36239158455259451452 0.59901447269389374028 -0.82020916966611068233;-2.6117704188787405073 4.6576244422550505675 -3.4363538341716193258 -8.7894433776948392989 0.91038161916015025721;0.029332812805453967187 0.015559836375851322787 -0.35419389072972279342 -0.26383172219705047779 -0.18304097470982547136;-4.8570821949135458695 -0.011199057804279436562 -0.53510014245323300752 -0.46301750786281931083 0.90731819960423487625;-3.2985338539152833093 -0.27012322488348627925 -1.6757940953299230724 1.4506663699684412272 0.30105733459578115641;3.4838874124183516479 0.29997552062672844242 1.8010951789509519472 -1.4915635532314857059 -0.31495748974748072335;-2.3417908908323816775 4.4199090587161400379 -3.1934392587922868501 -8.4685231148354329633 0.90095690115314819302;-2.615849391951974745 1.4620510727079099045 9.9565959908109871179 19.122756174644631955 -0.2051083847790122483;5.0398637983874703394 0.043569576286177247315 1.0927940678777672279 0.38052876933204732302 -0.98399821706539059019;-8.1312389098141171218 4.0350246035700481073 12.226669369576676161 0.91547471628943422051 2.9020555209767340266;-2.7155777363840778449 1.5191444159430091965 10.303281799419462317 19.79459042426834614 0.21547496150817360694;2.1263785214275272573 -4.2883751177779068087 3.0259698093664924023 8.3612000412659099879 -0.91569104076481977472;23.0661997385370654 0.57895237397313881189 -20.316359617830112683 1.9448983006420594855 -1.5548192359043087052];

% Layer 2
b2 = [-2.8203541938741074624;3.6350331486558702387];
LW2_1 = [1.3482857057683295121 1.0825940551801911393 -0.17624719602320129686 -5.2669937022193993315 0.017809779411875947819 -4.9503065498602971672 0.068900051076946938755 -2.2598802462378575484 0.41535406760858017972 -1.1747538184605808009 -2.0523473283209274776 0.074129758227826081374 0.031448258134218622095 -0.41963276013303346668 -8.4328016264800336188 -0.10991083456472158786 -0.070448340783274984722 4.8428812007726378397 -0.25000731590748492827 -0.34931709107310338069;1.1311130243663098938 0.89411544762381800489 5.0211971895482037098 -4.6112360976754578346 0.016790304068082257533 -3.7991211777764450908 -4.2208033303098844158 -2.0613863359482484938 -12.899307885420412845 -0.84007039105289160741 -1.2907531586450617933 12.223497643007334545 5.0676298957710592674 15.170843153820824156 -8.463517905913230166 -0.042701796263681916777 -0.0068851851824304017777 4.8630100948213295098 11.51548315112126275 0.0017453034436047956072];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [4.78151988468168e-05;4.78289452551318e-05];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
