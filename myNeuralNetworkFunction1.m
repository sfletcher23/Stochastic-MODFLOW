function [y1] = myNeuralNetworkFunction1(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 09-May-2017 14:59:42.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx5 matrix, input #1
% and returns:
%   y = Qx2 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.00303974068627535;0.00105005371411575;-49963.5589717891;-49585.9735612026;6.005047364];
x1_step1.gain = [2.00823043251994;224.792913320233;3.77642572091383e-05;3.83056410929303e-05;0.000341076228281849];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.11604375300098380974;-10.094162267507368114;-0.23146303503483095509;8.5275336842387510217;9.3469304924928238165;14.448388416563828329;0.96769859487677789556;-18.586169875731179957;-4.9333517511121263155;-21.782020340310133122;-9.1909799188871339481;3.1643508895063860997;0.35333651298645646355;-19.10282958695228217;19.154069193035649477;8.572115981142768959;-5.7702863858532511543;5.7461700442177612302;2.9399548034032165766;-30.307547194864227436];
IW1_1 = [0.37848365262909544615 -0.02121796477671735251 0.28530468421703769621 1.2614744290473678401 -1.3645002433802246866;-4.6607114443004027393 1.5437519562137818063 -1.7290820420220287534 3.9003339609930862686 0.24698156146562022517;-0.11834905421190375363 -0.0073243067920002484159 -0.36521559966124300667 -0.31994096285630446719 1.0310405252715499902;5.0800312545599961567 0.53483757380363805556 -2.7991798690570282027 0.19005395801135743783 -0.27273487087516978811;4.1391177086302963772 -1.1923219722518412222 1.713723545990016417 -3.4164895450406191912 -0.25209210450554186966;7.7379640354847678552 0.89457936761021061844 -5.507910018809389463 -3.603113864807966138 -0.89917995779750992114;0.12144747536053143722 -0.0017331155712589679969 0.62290896183457078461 0.63200752180783503764 0.049832747262217841344;-9.6569154562356303018 1.109236031341959805 8.2876129299696650321 -1.3033730116199806481 0.066922078370072940467;-7.4763616544086408666 0.0059238029655854767402 -0.43494225165357924823 -3.2722756459022410702 3.3932951528599053503;-13.979983575783705874 0.25429054067504808234 10.181711612858595828 0.15766054546400326553 0.058971152857186404095;-5.0033960973099009806 -0.82692563690011799959 4.5706747768941005106 -0.64721185473152675893 0.30140626485840349424;4.2045382034893989953 0.013165728930189548457 1.5210258428201519632 0.90065859409999493579 -3.2350845188250101359;0.13899567436392618047 0.011086929292831233795 0.20682870179878223849 0.19332109489478566111 -1.1986779243618748136;-9.9840015623557558655 -0.57452710701610276711 9.2497990670247407508 4.627602816907291583 1.1991042508288665136;11.20862669401624423 -0.46778807995643850726 -9.0076733272329825297 0.49893635662790658536 -0.060604420413329744555;4.7495668820895708961 0.72112072090741996533 -3.7559212955583181071 0.54938591739924269586 -0.29077242963817950816;-4.2207245238327093517 0.024485068374652068507 0.10010973224027940043 0.5909066186475584459 -1.1069987628821345016;4.2060997317366384252 -0.025546016767145084819 -0.095825701541319682764 -0.55020320428054680928 1.0781532010816685663;4.5424965436877196012 0.04535855827814391783 1.7325534965200668491 0.50635483259712099624 -2.5106059087885026493;-2.6259295867258742874 1.4399972367507156701 18.365188930398215206 13.945864890815794723 2.0954109555382709473];

% Layer 2
b2 = [2.0933928981251805901;1.7124931312738513878];
LW2_1 = [0.00053763843759907221746 0.051104773344200597751 -0.1428615259350554112 7.906392864333977144 0.062048110943818068908 -1.6103913992342679951 -0.0333325615017884061 11.410604492087317752 -0.00011375628464109822121 5.2771937628691514277 -4.8336894044933940151 -0.016781700839955008414 -0.1077699492240657142 -0.87004253858532620836 12.821200023823887904 -10.580678121073418652 0.91970514095008570887 1.0148915364910586767 0.0177510128631778695 0.70704508588045644757;0.011008259463487383295 -4.00156063542010898 -0.11795756576048718745 0.63841914358464613155 -5.5613107672614559007 -1.5618369928972908323 -0.034694628567372577665 0.33774899979355399449 -0.0073923983085635762771 0.17049122728825236162 -0.23871517533697880764 -0.010306578294337207652 -0.093866788058873537604 -0.85794035879377994469 0.38225945001270750234 -0.54657082659264921709 1.4806440517282843938 1.5813653473015134576 0.0029002875228077052046 0.70795834718189876167];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [4.78151988468168e-05;4.78289452551318e-05];
y1_step1.xoffset = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';

% 


end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
